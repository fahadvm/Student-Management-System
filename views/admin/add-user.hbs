<link rel="stylesheet" href="/styles/add-user.css">

<form action="/admin/addUser" method="post">
    <label for="email">Email:</label>
    <input type="email" name="email" id="email" required />
    
    <label for="password">Password:</label>
    <input type="password" name="password" id="password" required />
    
    <button type="submit">Add User</button>
</form>


{{#if message}}
  <script>
  
  const addUserForm = document.getElementById("addUserForm");
  addUserForm.addEventListener("submit", function (e) {
      e.preventDefault(); 

      const formData = new FormData(addUserForm);

      fetch('/admin/addUser', {
          method: "post",
          body: formData,
      })
      .then(response => response.json())
      .then(data => {
          if (data.success) {
              Swal.fire({
                  icon: 'success',
                  title: data.message,
                  showConfirmButton: true,
              }).then(() => {
                  window.location.reload(); 
              });
          } else {
              Swal.fire({
                  icon: 'error',
                  title: data.message,
                  showConfirmButton: true,
              });
          }
      })
      .catch(error => {
          console.log("Error:", error);
          Swal.fire({
              icon: 'error',
              title: 'An error occurred',
              showConfirmButton: true,
          });
      });
  });
</script>

{{/if}}